<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pro Control Panel</title>
    <script src="/socket.io/socket.io.js"></script>
    <style>
        body { background: #121212; color: #e0e0e0; font-family: sans-serif; padding: 20px; display: flex; justify-content: center; }
        .panel { background: #1e1e1e; padding: 25px; border-radius: 12px; width: 100%; max-width: 450px; border: 1px solid #333; }
        .stats-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; margin-bottom: 20px; }
        .stat-card { background: #252525; padding: 10px; border-radius: 8px; text-align: center; border: 1px solid #333; }
        .stat-val { font-size: 24px; font-weight: bold; color: white; }
        .stat-lbl { font-size: 11px; color: #aaa; }
        .record-lbl { font-size: 10px; color: #FFD700; margin-top: 5px; }
        .btn { width: 100%; padding: 12px; border: none; border-radius: 6px; font-weight: bold; cursor: pointer; margin-top: 5px; }
        .btn-save { background: #00eaff; color: #000; }
        .btn-reset { background: #2a1a1a; color: #ff4444; border: 1px solid #ff4444; }
        .btn-reset-rec { background: #2a1a1a; color: #FFD700; border: 1px solid #FFD700; } 
        .group { margin-bottom: 12px; display: flex; justify-content: space-between; align-items: center; }
        label { font-size: 13px; color: #ccc; }
        input, select { background: #333; border: 1px solid #444; color: white; padding: 6px; border-radius: 4px; width: 100px; }
        input[type="color"] { width: 40px; height: 30px; padding: 0; border: none; }
    </style>
</head>
<body>
    <div class="panel">
        <h2 style="text-align:center; color:#00eaff;">üìä Live Dashboard</h2>
        <div class="stats-grid">
            <div class="stat-card" style="border-bottom: 3px solid #00eaff;">
                <div class="stat-lbl">CURRENT WIN</div><div class="stat-val" id="liveWin">0</div>
                <div class="record-lbl">üèÜ Best: <span id="recWin">0</span></div>
            </div>
            <div class="stat-card" style="border-bottom: 3px solid #ff0055;">
                <div class="stat-lbl">CURRENT LOSS</div><div class="stat-val" id="liveLoss">0</div>
                <div class="record-lbl">üíÄ Worst: <span id="recLoss">0</span></div>
            </div>
        </div>

        <button class="btn btn-reset" onclick="api('reset')">‚ö† RESET SCORES (0-0)</button>
        <button class="btn btn-reset-rec" onclick="api('reset_records')">üèÜ RESET RECORDS (Best)</button>

        <hr style="border-color:#333; margin: 20px 0;">

        <div class="group"><label>Win Text</label><input type="text" id="winText"></div>
        <div class="group"><label>Loss Text</label><input type="text" id="lossText"></div>
        <div class="group"><label>Win Color</label><input type="color" id="winColor"></div>
        <div class="group"><label>Loss Color</label><input type="color" id="lossColor"></div>
        <div class="group"><label>Width / Height</label><span><input type="number" id="width" style="width:45px"> <input type="number" id="height" style="width:45px"></span></div>
        <div class="group"><label>Layout</label>
            <select id="layout">
                <option value="row">Horizontal</option>
                <option value="column">Vertical</option>
                <option value="rtl">Arabic (RTL)</option>
            </select>
        </div>

        <button class="btn btn-save" onclick="saveSettings()">SAVE DESIGN</button>
        <div id="status" style="text-align:center; margin-top:10px; font-size:12px; color:gray">Connecting...</div>
    </div>

    <script>
        const socket = io();
        socket.on('update_scores', (d) => {
            document.getElementById('liveWin').innerText = d.win; document.getElementById('liveLoss').innerText = d.loss;
            document.getElementById('recWin').innerText = d.rec_win; document.getElementById('recLoss').innerText = d.rec_loss;
        });
        socket.on('update_settings', (s) => {
            setVal('winText', s.winText); setVal('lossText', s.lossText);
            setVal('winColor', s.winColor); setVal('lossColor', s.lossColor);
            setVal('width', s.width); setVal('height', s.height); setVal('layout', s.layout);
            document.getElementById('status').innerText = "‚úÖ Synced";
        });
        function saveSettings() {
            const s = {
                winText: getVal('winText'), lossText: getVal('lossText'),
                winColor: getVal('winColor'), lossColor: getVal('lossColor'),
                width: getVal('width'), height: getVal('height'), layout: getVal('layout'),
                bgColor: "#000000", labelColor: "#CCCCCC", numColor: "#FFFFFF", gap: 15, fontFamily: "'Cairo', sans-serif", labelSize: 30, numSize: 35, borderWidth: 4, borderRadius: 6, shadowOpacity: 0.5
            };
            socket.emit('save_settings', s);
        }
        function api(action) { if(confirm("Are you sure?")) fetch(`/api/set?action=${action}`); }
        function setVal(id, v) { if(document.getElementById(id)) document.getElementById(id).value = v; }
        function getVal(id) { return document.getElementById(id).value; }
    </script>
</body>
</html>
